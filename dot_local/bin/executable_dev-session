#!/bin/bash
# dev-session: Abre LazyVim (75%) arriba y Claude Code (25%) abajo en tmux

SESSION_NAME="${1:-dev}"

# Verificar si la sesión ya existe
tmux has-session -t "$SESSION_NAME" 2>/dev/null

if [ $? != 0 ]; then
  # Crear nueva sesión con LazyVim
  tmux new-session -d -s "$SESSION_NAME" -n editor

  # Panel principal (arriba): LazyVim ocupando 75%
  tmux send-keys -t "$SESSION_NAME:editor.0" 'NVIM_APPNAME=nvim-lazyvim nvim' C-m

  # Dividir horizontalmente (abajo): Claude Code ocupando 25%
  tmux split-window -t "$SESSION_NAME:editor" -v -p 25
  tmux send-keys -t "$SESSION_NAME:editor.1" 'claude' C-m

  # Enfocar en el panel de LazyVim (arriba)
  tmux select-pane -t "$SESSION_NAME:editor.0"
fi

# Adjuntar a la sesión
tmux attach-session -t "$SESSION_NAME"
